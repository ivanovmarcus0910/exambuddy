
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đăng nhập | E-Learning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Phông chữ hiện đại */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0D0D1A, #1A1A40);
            color: white;
            animation: fadeIn 1s ease-in-out;
        }

        /* Hiệu ứng fade-in */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Gradient màu cho nút */
        .gradient-btn {
            background: linear-gradient(90deg, #8A2BE2, #3B82F6);
            transition: all 0.3s ease-in-out;
        }

        .gradient-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(138, 43, 226, 0.5);
        }

        /* Form input */
        input {
            background: transparent;
            border: 1px solid #555;
            padding: 12px;
            border-radius: 8px;
            color: white;
            width: 100%;
        }

        input:focus {
            border-color: #8A2BE2;
            box-shadow: 0px 0px 8px rgba(138, 43, 226, 0.5);
            transition: all 0.3s ease-in-out;
            outline: none;
        }

        /* Checkbox tùy chỉnh */
        .custom-checkbox {
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #ffffff;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .custom-checkbox:checked {
            background-color: #3B82F6;
            border-color: #3B82F6;
        }

        .custom-checkbox:checked::after {
            content: "✔";
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        /* Layout */
        .login-container {
            display: flex;
            height: 100vh;
            width: 100%;
        }

        .left-section {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .login-box {
            width: 420px;
        }

        .right-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: url('https://source.unsplash.com/600x800/?technology,education') no-repeat center center/cover;
        }

        /* Font chữ tiêu đề nổi bật */
        .title-text {
            font-family: 'Poppins', sans-serif;
            font-size: 31px; /* Tăng kích thước chữ */
            font-weight: 500; /* Chữ đậm hơn */
            color: white; /* Giữ màu trắng */
            text-transform: uppercase; /* Chữ in hoa */
            letter-spacing: 1px; /* Giãn chữ nhẹ */
        }

        /* Font chữ mô tả nhỏ hơn */
        .subtitle-text {
            font-family: 'Poppins', sans-serif;
            font-size: 15px; /* Nhỏ hơn tiêu đề */
            color: #B0B0B0; /* Màu xám nhẹ */
            margin-top: 9px;
        }

        /* Căn chỉnh toàn bộ input field sang phải một chút */
        .input-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start; /* Giữ canh lề trái nhưng cách vào trong */
            margin-left: 14px; /* Dịch chuyển phần này sang phải */
            width: 100%;
            max-width: 370px; /* Giới hạn chiều rộng */
        }

        /* Căn chỉnh ô nhập */
        .input-field {
            width: 100%;
            padding: 10px;
            font-size: 14px;
            border: 1px solid #555;
            border-radius: 12px;
            background: transparent;
            color: white;
            margin-top: 5px; /* Tăng khoảng cách giữa label và input */

        }

        /* Khi focus vào input */
        .input-field:focus {
            border-color: #8A2BE2;
            box-shadow: 0px 0px 8px rgba(138, 43, 226, 0.5);
            transition: all 0.3s ease-in-out;
            outline: none;
        }

        /* Căn chỉnh khoảng cách của label */
        .input-label {
            display: block;
            color: white;
            font-size: 14px;
            margin-bottom: 4px; /* Khoảng cách giữa chữ và ô nhập */
            margin-top: 12px; /* Dời phần label xuống dưới 1 chút */
            margin-left: 10px;
        }

        /* Căn chỉnh phần Ghi nhớ & Quên mật khẩu theo chiều rộng của ô nhập */
        .remember-forgot-container {
            display: flex;
            justify-content: space-between; /* Căn 2 phần về 2 phía */
            align-items: center;
            width: 95%; /* Đồng nhất với ô nhập mật khẩu */
            max-width: 370px; /* Giới hạn chiều rộng tối đa */
            margin-left: 14px; /* Dịch sang phải một chút */
            margin-top: 15px; /* Tạo khoảng cách với ô nhập trên */
            margin-bottom: 25px;
            font-size: 13px;
        }

        /* Căn giữa phần "Hoặc tiếp tục với" */
        .social-login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin: auto;
            margin-left: 14px;
            margin-top: 16px;
            max-width: 370px;
            text-align: center;
            position: relative;
        }

        /* Định dạng đoạn gạch ngang 2 bên */
        .social-login-container::before,
        .social-login-container::after {
            content: "";
            flex: 1;
            height: 1px;
            background: #555;
            margin: 0 10px;
        }

        /* Nút đăng nhập mạng xã hội */
        .social-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: auto;
            margin-right: 18px;
            margin-top: 12px;
        }

        /* Nút đăng nhập đồng bộ với ô nhập */
        .login-button {
            width: 95%; /* Giống với ô nhập */
            max-width: 370px; /* Giới hạn chiều rộng */
            padding: 12px;
            font-size: 15px;
            text-align: center;
            border-radius: 12px;
            background: linear-gradient(90deg, #8A2BE2, #3B82F6);
            transition: all 0.3s ease-in-out;
            cursor: pointer;
            margin-left: 14px;
            margin-bottom: 10px;
        }

        /* Điều chỉnh kích thước và căn giữa icon */
        .social-buttons button {
            width: 48px; /* Kích thước tròn */
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: white;
            border: none;
            padding: 0;
            transition: transform 0.2s ease-in-out;
        }

        .social-buttons button:hover {
            transform: scale(1.1);
        }

        /* Đảm bảo icon ở chính giữa */
        .social-buttons img {
            width: 20px;
            height: 20px;
            display: block;
            margin: auto;
        }


    </style>
</head>
<body>

<div class="login-container">
    <!-- Bên trái - Form đăng nhập -->
    <div class="left-section">
        <div class="login-box">
            <div class="text-left">
                <img src="https://via.placeholder.com/150x40?text=Edumall" alt="Logo">
            </div>

            <div class="text-center">
                <h2 class="title-text">CHÀO MỪNG TRỞ LẠI</h2>
                <p class="subtitle-text">Hãy nhập thông tin để bắt đầu ngay nhé!</p>
            </div>

            <form action="/login" method="post" class="mt-6" onsubmit="return validateForm()">
                <!-- Hiển thị thông báo lỗi từ server -->
                <div id="error-message" th:if="${error}" class="bg-red-500 text-white p-3 rounded-md text-center mt-4">
                    <span th:text="${error}"></span>
                </div>

                <!-- Ô nhập Tên đăng nhập -->
                <div class="input-container">
                    <label class="block text-white text-sm mb-1">Tên đăng nhập</label>
                    <input type="text" name="username" placeholder="Tên đăng nhập" class="input-field">
                    <p id="username-error" class="text-red-500 text-sm mt-1 hidden">Ô không được để trống</p>
                </div>

                <!-- Ô nhập Mật khẩu -->
                <div class="input-container mt-3">
                    <label class="block text-white text-sm mb-1">Mật khẩu</label>
                    <input type="password" name="password" placeholder="Mật khẩu" class="input-field">
                    <p id="password-error" class="text-red-500 text-sm mt-1 hidden">Ô không được để trống</p>
                </div>

                <!-- Ghi nhớ đăng nhập và Quên mật khẩu -->
                <div class="remember-forgot-container">
                    <label class="flex items-center cursor-pointer">
                        <input type="checkbox" id="rememberMe" name="rememberMe" class="custom-checkbox mr-2">
                        Ghi nhớ đăng nhập
                    </label>
                    <a href="/forgotPass" class="hover:text-orange-400">Quên mật khẩu?</a>
                </div>

                <!-- Nút đăng nhập -->
                <button type="submit" class="login-button mt-2">
                    Đăng nhập →
                </button>
            </form>

            <!-- Phần "Hoặc tiếp tục với" -->
            <div class="social-login-container">
                <span class="text-white text-sm font-semibold bg-[#15152D] px-3">Hoặc tiếp tục với</span>
            </div>

            <!-- Các nút đăng nhập mạng xã hội -->
            <div class="social-buttons">
                <button class="bg-white text-blue-700 hover:bg-gray-200 transition">
                    <img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook">
                </button>
                <button class="bg-white text-gray-800 hover:bg-gray-200 transition">
                    <img src="https://cdn-icons-png.flaticon.com/512/281/281764.png" alt="Google">
                </button>
            </div>

            <p class="text-gray-400 text-sm mt-6 text-center">
                Chưa có tài khoản? <a href="/signup" class="text-white hover:underline">Đăng ký</a>
            </p>

        </div>
    </div>

    <!-- Bên phải - Hình nền và quảng cáo -->
    <div class="right-section">
        <h2 class="text-3xl font-bold text-white">HỌC CỰC CHẤT</h2>
        <h3 class="text-2xl font-bold text-blue-400">GIÁ CỰC HỜI</h3>
        <p class="text-white mt-4 text-center max-w-md">
            Combo tiết kiệm với chi phí siêu ưu đãi, tiết kiệm đến 70% so với mua khóa học lẻ.
        </p>

        <div class="flex space-x-4 mt-6">
            <img src="https://via.placeholder.com/120x160?text=Book+VR" class="rounded-lg">
            <img src="https://via.placeholder.com/120x160?text=VR+Student" class="rounded-lg">
        </div>
    </div>
</div>
<script>
    function validateForm() {
        let username = document.getElementById("username").value.trim();
        let password = document.getElementById("password").value.trim();
        let usernameError = document.getElementById("username-error");
        let passwordError = document.getElementById("password-error");
        let errorMessage = document.getElementById("error-message");

        let isValid = true;

        // Kiểm tra ô username
        if (username === "") {
            usernameError.classList.remove("hidden");
            isValid = false;
        } else {
            usernameError.classList.add("hidden");
        }

        // Kiểm tra ô password
        if (password === "") {
            passwordError.classList.remove("hidden");
            isValid = false;
        } else {
            passwordError.classList.add("hidden");
        }

        // Nếu chưa nhập đủ thông tin, không gửi form
        if (!isValid) {
            if (errorMessage) {
                errorMessage.style.display = "none"; // Ẩn lỗi xác thực server khi lỗi ở client
            }
            return false;
        }

        return true; // Nếu hợp lệ, cho phép form gửi đi
    }
    // ✅ JavaScript xử lý session & cookie để ghi nhớ đăng nhập
    window.onload = function () {
        const cookies = document.cookie.split("; ");
        let username = "";
        let password = "";

        cookies.forEach(cookie => {
            let [key, value] = cookie.split("=");
            key = key.trim();
            if (key === "rememberedUsername") username = decodeURIComponent(value || "");
            if (key === "rememberedPassword") password = decodeURIComponent(value || "");
        });

        if (username && password) {
            document.querySelector('input[name="username"]').value = username;
            document.querySelector('input[name="password"]').value = password;
            document.getElementById("rememberMe").checked = true;
        }
    };

    // Xoá cookie nếu "Ghi nhớ đăng nhập" bị bỏ chọn
    document.getElementById("rememberMe").addEventListener("change", function () {
        if (!this.checked) {
            document.cookie = "rememberedUsername=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
            document.cookie = "rememberedPassword=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }
    });
</script>

</body>
</html>
